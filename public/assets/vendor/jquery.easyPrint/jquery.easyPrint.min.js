!function(a){"use strict";function c(a){return!!("object"==typeof Node?a instanceof Node:a&&"object"==typeof a&&"number"==typeof a.nodeType&&"string"==typeof a.nodeName)}function d(b,d,e){return c(b)?(d.$elem=a(b),e.length>0?e[0]:{}):e.length<1?(d.$elem=a("HTML"),{}):(d.$elem=a(e[0]),c(d.$elem[0])?e.length>1?e[1]:{}:(d.$elem=a("html"),e[0]))}function e(b){var c={useIframe:!0,size:"",direction:"portrait",className:"",globalStyles:!0,mediaPrint:!0,printCss:"",stylesheet:null,noPrintSelector:".no-print",appendHtml:null,prependHtml:null,title:null,doctype:"<!doctype html>",printColor:"exact",printTagA:!0,groupTableHeader:!0,groupTableFooter:!0,beforePrint:null,afterPrint:null,module:null};return a.extend({},c,b||{})}function f(a,b){var d,c="location=yes,statusbar=no,directories=no,menubar=no,titlebar=no,toolbar=no,dependent=no";return c+=",width="+window.innerWidth+",height="+window.innerHeight,c+=",resizable=yes,personalbar=no,scrollbars=yes",d=window.open("","EASY_PRINT_WINDOW",c),null==d?alert("Please allow print control open new window!"):(d.doc=d.document||"",h(d,a,b,!1))}function g(b,c){var e,d=1==c.useIframe||0==c.useIframe?null:a(c.useIframe+"");a:if(null==d||d.length<1){if(d=a("#EASY_TEMP_IFRAME"),d.length>0)break a;d=a('<iframe id="EASY_TEMP_IFRAME" height="0" width="0" border="0" wmode="opaque"/>').prependTo("body").css({position:"absolute",top:-999999,left:-999999,"z-index":-999999})}return e=d.get(0),h(e,b,c,!0)}function h(c,d,e,g){var j,k,l,m,n,o,p,q,h=d.$elem;try{c=c.contentWindow||c.contentDocument||c;try{c.resizeTo(window.innerWidth,window.innerHeight)}catch(i){console.warn(i)}try{j=c.document||c.contentDocument||c,j.write(e.doctype||"<!DOCTYPE HTML>"),k=[],k.push('<div class="page '+e.className+'">'),k.push(h.prop("outerHTML")),k.push("</div>"),j.write(k.join("\n"))}catch(i){console.warn(i)}l=a(j),m=e.title||a("title").text()||"",e.module&&"byA4"==e.module.key&&(n=e.module,d.styleHtm.push('<style type="text/css" media="print">'),d.styleHtm.push("@page {margin: 0 !important;size:A4 portrait !important;}"),d.styleHtm.push(".page {margin: 2cm !important;}"),d.styleHtm.push(".easy_pf {position: fixed !important;z-index:999 !important;}"),d.styleHtm.push(".easy_phl{top: 10px; left: 10px;}"),d.styleHtm.push(".easy_phr{top: 10px; right: 10px;}"),d.styleHtm.push(".easy_pfl{bottom: 10px; left: 10px;}"),d.styleHtm.push(".easy_pfr{bottom: 10px; right: 10px;}"),-1!=b.indexOf("chrome")&&d.styleHtm.push(".easy_pfr:after{content:'共 ' counter(pages) ' 页，当前第 ' counter(page) ' 页' !important;}"),d.styleHtm.push("</style>"),e.appendHtml=e.appendHtml||"",e.appendHtml+='<div class="easy_pf easy_phl">'+(n.leftTop||"")+'</div><div class="easy_pf easy_phr">'+(n.rightTop||"")+"</div>",e.appendHtml+='<div class="easy_pf easy_pfl">'+(n.leftBottom||"")+'</div><div class="easy_pf easy_pfr">'+(n.rightBottom||"")+"</div>"),l.find("head").html("<title>"+m+"</title>"+d.linkHtm.join("\n")+d.styleHtm.join("\n")),l.find(e.noPrintSelector).remove(),o=l.find(".page"),o.find("canvas").each(function(a,b){var c=h.find("canvas:eq("+a+")"),d=c[0].getContext("2d").getImageData(0,0,c.width(),c.height());b.getContext("2d").putImageData(d,0,0)}),e.prependHtml&&o.prepend(e.prependHtml),e.appendHtml&&o.append(e.appendHtml),p=!1,q=function(){if(!p){p=!0,e.beforePrint&&e.beforePrint(l),c.focus();var b=(new Date).getTime();try{j.execCommand("print",!1,null)||c.print(),h.focus()}catch(d){c.print()}return j.close(),l=null,c.close(),g&&a(c).remove(),e.afterPrint&&e.afterPrint((new Date).getTime()-b)}},a(c).on("load",q),setTimeout(q,e.timeout||720)}catch(r){if(console.warn("PrintContent error: ",r),!g)return c.close();a(c).remove(),f(d,e)}}var b=navigator.userAgent.toLowerCase();a.easyPrint=a.fn.easyPrint=function(){var c,h,i,j,k;if(-1!=b.indexOf("compatible")&&-1!=b.indexOf("msie")||-1!=b.indexOf("trident")&&-1!=b.indexOf("rv:11.0"))return alert("This plugin does not support IE browser");if(c={},h=this,h=h instanceof a?h.get(0):h,i=d(h,c,arguments),i=e(i),j=[],(1==i.globalStyles||"link"==i.globalStyles)&&a("link").each(function(b,c){j.push(a(c).prop("outerHTML"))}),i.globalStyles||1!=i.mediaPrint&&"link"!=i.mediaPrint||a('link[media="print"]').each(function(b,c){j.push(a(c).prop("outerHTML"))}),i.stylesheet&&("string"==typeof i.stylesheet?j.push('<link href="'+i.stylesheet+'" rel="stylesheet" type="text/css" media="print"/>'):i.stylesheet instanceof Array&&a.each(Array,function(a,b){"string"==typeof b&&j.push('<link href="'+b+'" rel="stylesheet" type="text/css" media="print"/>')})),c.linkHtm=j,k=[],(1==i.globalStyles||"style"==i.globalStyles)&&a("style").each(function(b,c){k.push(a(c).prop("outerHTML"))}),i.globalStyles||1!=i.mediaPrint&&"style"!=i.mediaPrint||a('style[media="print"]').each(function(b,c){k.push(a(c).prop("outerHTML"))}),k.push('<style type="text/css" media="print">'),k.push("@page {orphans:2;widows:2;page-break-after:always}"),i.size&&i.direction?k.push("@page {size:"+(a.trim(i.size)+" "+a.trim(i.direction))+"}"):k.push("@page {size:"+(a.trim(i.size)||a.trim(i.direction)||"AUTO")+"}"),i.printColor=a.trim(i.printColor||""),-1!=",economy,exact,inherit,initial,unset,".indexOf(","+i.printColor+",")&&k.push(".page {-webkit-print-color-adjust:"+i.printColor+"}"),1==i.printTagA&&k.push('.page a[href^="http://"]:after, a[href^="https://"]:after{content: " (" attr(href) ") " !important;}'),1==i.groupTableHeader&&k.push(".page thead{display: table-header-group !important;}"),1==i.groupTableFooter&&k.push(".page footer{display:table-footer-group !important;}"),k.push("</style>"),i.printCss&&k.push('<style type="text/css" media="print">'+i.printCss+"</style>"),c.styleHtm=k,i.className=a.trim(i.className||""),!i.useIframe)return f(c,i);try{g(c,i)}catch(l){console.error("Failed to print from iframe",l.stack,l.message),f(c,i)}}}(jQuery);